<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>KJC LP Auto Stake (Web3.js)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Web3.js -->
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>üíß KJC LP Auto Staking</h1>
    <p id="status" class="err">‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</p>
    <button onclick="connectWallet()">üîó ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</button>

    <hr>

    <!-- ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ -->
    <label>üì® ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</label>
    <div style="display:flex; gap:8px;">
      <input id="myRefLink" type="text" readonly style="flex:1;">
      <button onclick="copyRefLink()">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
    </div>
    <small id="refHint" style="color:#bfa53a">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</small>

    <hr>

    <!-- ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Referrer -->
    <label>Referrer Address:</label>
    <input id="refAddress" placeholder="0x..." style="width:100%">
    <button onclick="setReferrer()">üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Referrer</button>
    <small class="muted">‡∏ú‡∏π‡πâ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ: <span id="refResolved">-</span></small>

    <hr>

    <!-- ‡∏ã‡∏∑‡πâ‡∏≠‡πÅ‡∏•‡∏∞ Stake -->
    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô USDT ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ã‡∏∑‡πâ‡∏≠ & Stake LP:</label>
    <input id="usdtAmount" type="number" placeholder="‡πÄ‡∏ä‡πà‡∏ô 50">
    <button onclick="quoteKJC()">üîç ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô KJC</button>
    <p id="quoteBox">-</p>
    <button onclick="buyAndStake()">üß© Buy & Stake</button>

    <hr>

    <!-- Your Stake -->
    <div class="card">
      <h2>üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Staking ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h2>
      <div class="grid">
        <div>
          <div class="label">Staked LP</div>
          <div class="big" id="uiStakedLP">-</div>
        </div>
        <div>
          <div class="label">‡πÄ‡∏Ñ‡∏•‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
          <div class="big" id="uiLastClaim">-</div>
        </div>
        <div>
          <div class="label">‡πÄ‡∏Ñ‡∏•‡∏°‡∏£‡∏≠‡∏ö‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</div>
          <div class="big" id="uiNextClaim">-</div>
        </div>
        <div>
          <div class="label">‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å‡∏ñ‡∏≠‡∏ô LP ‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏±‡∏á</div>
          <div class="big" id="uiUnlockAt">-</div>
        </div>
        <div>
          <div class="label">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ñ‡∏≠‡∏ô</div>
          <div class="big" id="uiCanWithdraw">-</div>
        </div>
        <div>
          <div class="label">Referral Rewards (KJC)</div>
          <div class="big" id="uiRefRewards">-</div>
        </div>
      </div>
      <div style="margin-top:10px;">
        <button id="btnRefresh" onclick="fetchAndRenderUser()">üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        <button id="btnWithdraw" onclick="withdrawLP()">‚¨áÔ∏è ‡∏ñ‡∏≠‡∏ô LP</button>
      </div>
    </div>

    <hr>

    <!-- ‡πÄ‡∏Ñ‡∏•‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• -->
    <button onclick="claimStakingReward()">üéÅ ‡πÄ‡∏Ñ‡∏•‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• Staking</button>
    <button onclick="claimReferralReward()">üéÅ ‡πÄ‡∏Ñ‡∏•‡∏°‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• Referral</button>
  </div>

  <!-- Toast notification -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script src="config.js"></script>
  <script src="wallet.js"></script>
  <script src="staking.js"></script>
</body>
</html>
